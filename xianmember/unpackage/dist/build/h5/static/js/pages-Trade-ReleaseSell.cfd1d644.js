(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Trade-ReleaseSell"],{2809:function(e,t,a){"use strict";a.r(t);var i=a("3f42"),n=a("4197");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("3fc2");var o,l=a("f0c5"),r=Object(l["a"])(n["default"],i["b"],i["c"],!1,null,"aeda9098",null,!1,i["a"],o);t["default"]=r.exports},"3f42":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("uni-page-head",{attrs:{"uni-page-head-type":"default"}},[a("div",{staticClass:"uni-page-head",staticStyle:{background:"linear-gradient(90deg,#e4007f,#f08300)",color:"rgb(255, 255, 255)"}},[a("div",{staticClass:"uni-page-head-hd"},[a("div",{staticClass:"uni-page-head-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.go.apply(void 0,arguments)}}},[a("i",{staticClass:"uni-btn-icon",staticStyle:{color:"rgb(255, 255, 255)","font-size":"27px"}},[e._v("")])])]),a("div",{staticClass:"uni-page-head-bd"},[a("div",{staticClass:"uni-page-head__title",staticStyle:{"font-size":"16px",opacity:"1"}},[e._v("发布渠豆 出售订单")])]),a("div",{staticClass:"uni-page-head-ft"})]),a("div",{staticClass:"uni-placeholder"})]),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"balance"},[a("v-uni-view",{staticClass:"balance-a balance-b"},[a("span",[e._v("渠豆")]),a("p",[e._v(e._s(e.money))])]),a("v-uni-view",{staticClass:"balance-a"},[a("span",[e._v("余额")]),a("p",[e._v(e._s(e.moneyQuota))])])],1),a("v-uni-view",{staticClass:"content-pre"},[a("v-uni-view",{staticClass:"pre"},[a("v-uni-label",{staticClass:"pre-laber"},[e._v("单价")]),a("v-uni-view",{staticClass:"pre-input"},[a("v-uni-input",{staticClass:"uni-input",attrs:{type:"number",placeholder:"请输入价格"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inpuPrice.apply(void 0,arguments)}},model:{value:e.salePrice,callback:function(t){e.salePrice=t},expression:"salePrice"}})],1)],1),a("v-uni-view",{staticClass:"pre"},[a("v-uni-label",{staticClass:"pre-laber"},[e._v("出售数量")]),a("v-uni-view",{staticClass:"pre-input"},[a("v-uni-input",{staticClass:"uni-input",attrs:{type:"number",placeholder:"请输入出售数量"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.keUp.apply(void 0,arguments)}},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}})],1)],1),a("v-uni-view",{staticClass:"pre"},[a("v-uni-label",{staticClass:"pre-laber"},[e._v("购买总额")]),a("v-uni-view",{staticClass:"pre-input"},[a("v-uni-input",{staticClass:"uni-input",attrs:{disabled:e.disabled,type:"number"},model:{value:e.saleMoney,callback:function(t){e.saleMoney=t},expression:"saleMoney"}})],1)],1),a("v-uni-view",{staticClass:"action-btn"},[a("v-uni-button",{attrs:{type:"warn"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addSaleListEntity.apply(void 0,arguments)}}},[e._v("确认")])],1)],1)],1)],1)},s=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}))},"3fc2":function(e,t,a){"use strict";var i=a("dde6"),n=a.n(i);n.a},4197:function(e,t,a){"use strict";a.r(t);var i=a("d5ba"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},"9e25":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'.balance[data-v-aeda9098]{padding:%?40?% 0;background:-webkit-linear-gradient(left,#e4007f,#f08300);background:linear-gradient(90deg,#e4007f,#f08300);overflow:hidden}.balance-a[data-v-aeda9098]{color:#fff;text-align:center;position:relative;width:50%;float:left}.balance-a span[data-v-aeda9098]{font-size:%?26?%}.balance-a p[data-v-aeda9098]{font-size:%?42?%}.balance-b[data-v-aeda9098]::after{width:%?2?%;height:%?50?%;content:"";background:hsla(0,0%,100%,.5);position:absolute;right:0;top:25%}.content-pre[data-v-aeda9098]{border-radius:4px;margin:%?40?% %?40?%;padding:%?20?%;box-shadow:1px 1px 10px silver}.pre[data-v-aeda9098]{display:table;border-bottom:#f1f1f1 1px solid;width:100%}.pre-laber[data-v-aeda9098]{display:table-cell;font-size:%?30?%;padding:0 %?10?%;width:%?200?%}.pre-input[data-v-aeda9098]{display:table-cell;font-size:%?30?%!important}.uni-input[data-v-aeda9098]{height:%?90?%}.sell-price[data-v-aeda9098]{width:%?500?%;height:%?40?%;position:relative;padding:0 %?40?% 0 0}.sell-price-text[data-v-aeda9098]{font-size:%?30?%;position:absolute;right:%?-50?%;top:%?-14?%;width:%?80?%}.action-btn[data-v-aeda9098]{padding:%?20?% %?20?%;margin-top:%?50?%}',""]),e.exports=t},d5ba:function(e,t,a){"use strict";var i=a("ee27");a("c975"),a("a15b"),a("b680"),a("e25e"),a("ac1f"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("36fb")),s={data:function(){return{token:"",money:"",moneyQuota:"",disabled:!0,price:0,thisPrice:0,salePrice:"",number:"",saleMoney:"",minNumber:0,rangeValues:[-10,0],slideWidth:500,slideHeight:10,slideBlockSize:30,slideMin:-10.01,slideMax:10,isLiveMode:!0,step:.01}},onLoad:function(){this.token=uni.getStorageSync("token"),this.getUserLevelList(),this.getPriceTimeEntity()},onShow:function(){},computed:{current:function(){return this.show?0:1}},methods:{inpuPrice:function(){var e=this.salePrice+"",t=e.indexOf("."),a=t>-1?e.length-t-1:0;a>3&&(uni.showToast({title:"价格最多支持三位小数",icon:"none"}),this.salePrice="")},keUp:function(e){1==e.detail.value.length?this.number=e.detail.value.replace(/[^1-9]/g,""):this.number=e.detail.value.replace(/\D/g,""),this.saleMoney=this.formatNumber(this.salePrice*this.number,.001)},go:function(){uni.navigateTo({url:"/pages/Trade/TradeByAccount"})},onRangeChange:function(e){var t=this.thisPrice+this.thisPrice*e.maxValue/100;this.salePrice=this.formatNumber(t,.001),this.number&&(this.saleMoney=this.formatNumber(this.salePrice*this.number,.001)),this.rangeValues=[e.minValue,e.maxValue]},getUserLevelList:function(){var e=this;uni.request({url:e.ApiGateWay+"/sale/Transaction/GetMemberMoney",data:"",header:{Authorization:e.token},method:"POST",dataType:"json",success:function(t){n.default.CheckData(t)&&(e.money=t.data.data.money,e.moneyQuota=t.data.data.moneyQuota)},complete:function(){uni.hideLoading()},fail:function(e){uni.stopPullDownRefresh()}})},getPriceTimeEntity:function(){var e=this;uni.request({url:e.ApiGateWay+"/sale/Transaction/GetPriceTimeEntity",data:"",header:{Authorization:e.token},method:"POST",dataType:"json",success:function(t){n.default.CheckData(t)&&(e.minNumber=t.data.data.minNumber)},complete:function(){uni.hideLoading()},fail:function(e){uni.stopPullDownRefresh()}})},formatNumber:function(e,t){var a=""+t,i=a.indexOf("."),n=i>-1?a.length-i-1:0,s=.1*parseInt(1+Array((""+n).length+1).join(0)),o=e*s;return(parseInt(o/t+.5*(t>1?1:t))*t/s).toFixed(n)},addSaleListEntity:function(){var e=this;e.number>e.money?uni.showToast({title:"你的渠豆不足",icon:"none"}):e.number?e.number%e.minNumber==0?e.number<e.minNumber?uni.showToast({title:"数量必须大于"+e.minNumber,icon:"none"}):uni.request({url:e.ApiGateWay+"/sale/Transaction/AddSaleListEntity?price="+e.salePrice+"&number="+e.number+"&money="+e.saleMoney,data:"",method:"POST",dataType:"json",header:{Authorization:e.token},success:function(t){console.log(t),n.default.CheckData(t)?(e.getUserLevelList(),e.rangeValues[1]=0,e.number="",e.salePrice=e.thisPrice,e.saleMoney="",uni.showModal({title:"提示",content:"发布成功",confirmColor:"#5A83E9",showCancel:!1})):uni.showToast({title:t.data.errorMessage,icon:"none"})},complete:function(){uni.hideLoading()},fail:function(e){uni.stopPullDownRefresh()}}):uni.showToast({title:"数量是"+e.minNumber+"的倍数",icon:"none"}):uni.showToast({title:"请输入数量",icon:"none"})}}};t.default=s},dde6:function(e,t,a){var i=a("9e25");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("27fcb476",i,!0,{sourceMap:!1,shadowMode:!1})}}]);