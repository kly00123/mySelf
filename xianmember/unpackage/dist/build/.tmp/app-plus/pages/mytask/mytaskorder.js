(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mytask/mytaskorder"],{"13ae":function(t,e,a){"use strict";var o,n=function(){var t=this,e=t.$createElement,a=(t._self._c,t.onCopyResult("success")),o=t.onCopyResult("error");t.$mp.data=Object.assign({},{$root:{m0:a,m1:o}})},s=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return o})},1959:function(t,e,a){},"34ab":function(t,e,a){"use strict";a.r(e);var o=a("59c8"),n=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);e["default"]=n.a},"4daa":function(t,e,a){"use strict";var o=a("1959"),n=a.n(o);n.a},5596:function(t,e,a){"use strict";a.r(e);var o=a("13ae"),n=a("34ab");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("4daa");var i,c=a("f0c5"),r=Object(c["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=r.exports},"59c8":function(t,e,a){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(a("24a9"));function s(t){return t&&t.__esModule?t:{default:t}}var i={data:function(){return{token:"",info:{},item:{},imgPath:"",imgSvr:""}},onLoad:function(e){this.imgSvr=this.ImgServer,this.token=t.getStorageSync("token");var a=e.orderNo;this.getTask(a)},onShow:function(){},methods:{getTask:function(e){var a=this;t.showLoading({title:"请稍候..."}),t.request({url:a.ApiGateWay+"/sale/Member/GetMyTaskDetails?orderNo="+e,data:"",method:"POST",dataType:"json",header:{Authorization:a.token},success:function(e){if(n.default.CheckData(e)){var o=e.data.data;a.imgPath=o.taskPic,a.info=o}else t.showModal({title:"信息提示",content:e.data.errorMessage,showCancel:!1,success:function(e){e.confirm&&t.switchTab({url:"/pages/mytask/mytask"})}})},fail:function(){t.hideLoading()},complete:function(){t.hideLoading()}})},onCopyResult:function(e){"success"===e?t.showToast({title:"复制成功",icon:"none"}):console.log(o(2," at pages\\mytask\\mytaskorder.vue:162"))},sendTask:function(){var e=this;if(n.default.isEmpty(e.imgPath))t.showToast({title:"请上传图片",icon:"none"});else{var a={taskPic:e.imgPath,orderNo:e.info.orderNo};t.showLoading({title:"请稍候..."}),t.request({url:e.ApiGateWay+"/sale/Member/SubmitTask",data:a,method:"POST",dataType:"json",header:{Authorization:e.token},success:function(e){n.default.CheckData(e)?t.showModal({title:"信息提示",content:"提交成功,请等待审核!",showCancel:!1,success:function(e){e.confirm&&t.switchTab({url:"/pages/mytask/mytask"})}}):t.showModal({title:"信息提示",content:e.data.errorMessage,showCancel:!1,success:function(e){e.confirm&&t.switchTab({url:"/pages/mytask/mytask"})}})},fail:function(){t.hideLoading()},complete:function(){t.hideLoading()}})}},openUrl:function(){var t=navigator.userAgent;t.indexOf("cdridge-android")>0?wv.goUrl(this.info.url):location.href=this.info.url},copyData:function(){var e=this;t.setClipboardData({data:e.info.url,success:function(){t.showToast({title:"复制成功",icon:"none"})}})},selectPic1:function(){var e=this;t.chooseImage({count:6,sizeType:["compressed"],sourceType:["album","camera"],success:function(a){a.tempFiles[0].size;t.getImageInfo({src:a.tempFilePaths[0],success:function(t){e.upload(t.path)}})}})},selectPic:function(){var e=this,a="";t.chooseImage({count:1,sizeType:["compressed"],success:function(n){a=n.tempFilePaths.toString(),t.getImageInfo({src:a,success:function(t){var n=t.width,s=t.height,i=n/s;n>500&&(n=500,s=Math.floor(n/i));var c=new Image;c.src=a;var r=document.createElement("canvas"),u=r.getContext("2d");r.width=n,r.height=s,u.clearRect(0,0,n,s),u.drawImage(c,0,0,n,s),a=r.toDataURL("image/png"),console.log(o(a," at pages\\mytask\\mytaskorder.vue:313")),e.upload(a)}})}})},upload:function(e){t.showLoading({title:"请稍候..."});var a=this;t.uploadFile({url:a.ApiGateWay+"/sale/image/uploadByFile",filePath:e,name:"file",formData:{path:"/sale/task/"},success:function(e){var o=JSON.parse(e.data);0==o.errorCode?(t.showToast({icon:"success",title:"图片上传成功!"}),a.imgPath=o.data):(t.hideLoading(),t.showModal({title:"提示",content:"图片上传失败",showCancel:!1,success:function(t){}}))},complete:function(){a.upload_field=""}})}}};e.default=i}).call(this,a("6e42")["default"],a("0de9")["default"])},ec8a:function(t,e,a){"use strict";(function(t){a("b82d"),a("921b");o(a("66fd"));var e=o(a("5596"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])}},[["ec8a","common/runtime","common/vendor"]]]);